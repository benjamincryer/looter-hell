<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>wavelength = 0;
current = 0;
waveend = 0;
stageend = 0;
smove = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>background_hspeed[0] = 0;
smove = 0;

//reset old blood surface
if(instance_exists(objController)) {
surface_free(objController.bsurf);
objController.xpos = 0;
}

//clean up corpses
with(objCorpse) fade = true;

//spawn this wave of enemies
for(i=0; i&lt;array_length_2d(global.w_enemies,current); i++) {
    //if position is empty
    if !(instance_position(global.w_positionx[current,i],global.w_positiony[current,i],objEnemy))
    instance_create(global.w_positionx[current,i],global.w_positiony[current,i],global.w_enemies[current,i]);
}

//check if boss wave
if (current == global.w_boss[0]) {
    var b = instance_find(asset_get_index(global.w_boss[1]),0);
    if (b != noone) b.boss = true;
}

//increment current
current++;

//reset timer (if there is a next wave)
if (current &lt; global.numWaves) {
    alarm[1] = global.waves[current,0]*room_speed;
}

waveend = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (smove != 0) {
    //scroll blood
    if (instance_exists(objController)) {
        objController.xpos += background_hspeed[0];
    }
    //scroll corpses
    with(objCorpse) {
        x += background_hspeed[0];
    }
}

//check if all enemies defeated
if (instance_number(objEnemy) == 0 and waveend = 0 and stageend == 0) {
    background_hspeed[0] = -(0.9*objPlayer.basespeed);
    alarm[1] = room_speed*3;
    waveend = 1;
    
    smove = 1;
    
    //END STAGE
    if (current &gt;= global.numWaves) {
    stageend = 1;
    background_hspeed[0] = 0;
    
    //generate chest rarity
    rand = random(100);
    if (rand &lt;= 5) {chest=sprChest1; chestbonus = 2.5;}
    else if (rand &lt;= 30) {chest=sprChest2; chestbonus = 2;}
    else if (rand &lt;= 60) {chest=sprChest3; chestbonus = 1.5;}
    else {chest=sprChest3; chestbonus = 1;}
    
    ii = instance_create(room_width/2,room_height/2,objChest);
    ii.sprite_index = chest;
    ii.chestbonus = chestbonus;
    
    scrEmptyWaves();
    instance_create(x,y,objInv);
    instance_destroy();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Show remaining waves
if (current&lt;=global.numWaves) {
    draw_set_font(fntMenu);
    draw_text(view_xview[0]+320,view_yview[0]+32,
    string(current) + " / " + string(global.numWaves));
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
